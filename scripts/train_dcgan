#!/bin/bash
#
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --partition=gpu
#SBATCH --gres=gpu:1
#SBATCH --cpus-per-task=4
#SBATCH --time=6:00:00
#SBATCH --mem=10GB
#SBATCH --job-name=acwg-clamp-b
#SBATCH --mail-type=END
#SBATCH --mail-user=ls4411@nyu.edu
#SBATCH --output=dcgan_\%j.out

module purge
module load pytorch/intel/20170226
module load torchvision/0.1.7

cd /scratch/ls4411/Research/GAN/CycleGAN

DIR_NAME="ac-w-gan-clamp-dropout-bias"
FILE_NAME="ac-w-gan-clamp"

mkdir ../TrainedNetworks/$DIR_NAME

pip install http://download.pytorch.org/whl/cu75/torch-0.1.11.post5-cp35-cp35m-linux_x86_64.whl --user
pip install torchvision --user

python main.py --epochs=200 --wasserstein=True --clamp=True --dataset=mnist --imageSize=28 --cuda --n-critic=5 --ac-gan=True --name=/$DIR_NAME/$FILE_NAME --clamping-method=clamp &> /scratch/ls4411/Research/GAN/TrainedNetworks/$DIR_NAME/$FILE_NAME-output.txt

exit 0

## Empty line
